<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generating Codebooks • crunchtabs</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Generating Codebooks">
<meta property="og:description" content="crunchtabs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">crunchtabs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Codebooks.html">Generating Codebooks</a>
    </li>
    <li>
      <a href="../articles/FAQ.html">Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/Overview.html">Introduction and Overview</a>
    </li>
    <li>
      <a href="../articles/Theming.html">Theming</a>
    </li>
    <li>
      <a href="../articles/Tracking.html">Recontact and Tracking Reports</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Crunch-io/crunchtabs/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Codebooks_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Generating Codebooks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Crunch-io/crunchtabs/blob/master/vignettes/Codebooks.Rmd"><code>vignettes/Codebooks.Rmd</code></a></small>
      <div class="hidden name"><code>Codebooks.Rmd</code></div>

    </div>

    
    
<p>Author: Brandon Bertelsen<br> Last updated: 2023-01-18</p>
<div id="codebooks" class="section level2">
<h2 class="hasAnchor">
<a href="#codebooks" class="anchor"></a>Codebooks!</h2>
<p>A codebook is used as a reference to document the contents of a survey by displaying unweighted counts and other types of survey metadata that may be important to someone using those data outside of the context of the crunch web application or other toplines/crosstabs prepared by crunchtabs.</p>
<div id="generating-codebooks" class="section level3">
<h3 class="hasAnchor">
<a href="#generating-codebooks" class="anchor"></a>Generating Codebooks</h3>
<p>You must be an editor of a dataset to make a codebook from a crunch dataset. In addition, the dataset must be unweighted. If your dataset is being actively used by clients it is recommended that you create a fork.</p>
<p>Creating a codebook from a crunch dataset is easy. In the examples below a codebook is created using the example dataset built into crunch.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Crunch-io/crunchtabs">crunchtabs</a></span><span class="op">)</span>
<span class="fu">login</span><span class="op">(</span><span class="op">)</span>
<span class="co"># If you already have an example dataset available in your account</span>
<span class="co"># ds &lt;- loadDataset("Example dataset")</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu">newExampledataset</span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="../reference/writeCodeBookLatex.html">writeCodeBookLatex</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/codebook-example-001.png" alt=""><p class="caption">Codebook Example</p>
</div>
<p>By default, if you supply a dataset to the the function <code>writeCodeBookLatex</code> it will name the resulting file after the dataset as well as set a title on the document with the same moniker. The resulting PDF document will be automatically opened after a short delay as the dataset is manipulated and written to PDF.</p>
<p>In some cases, your dataset may have an extremely long or otherwise problematic name, in this case, you can use the URL to the dataset.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/writeCodeBookLatex.html">writeCodeBookLatex</a></span><span class="op">(</span><span class="va">ds</span>, url <span class="op">=</span> <span class="st">"https://api.crunch.io/datasets/&lt;dataset-id&gt;"</span><span class="op">)</span></code></pre></div>
<blockquote>
<p>Appendices: If your data contain a categorical question with more than 20 categories, it will be pushed into an appendix by default. You can control this behavior by using the parameter <code>appendx = FALSE</code></p>
</blockquote>
</div>
</div>
<div id="options" class="section level2">
<h2 class="hasAnchor">
<a href="#options" class="anchor"></a>Options</h2>
<p>There are a number of optional settings that you can control such as: displaying a table of contents, a sample description, changing the title or subtitle, or adding a logo.</p>
<div id="table-of-contents" class="section level3">
<h3 class="hasAnchor">
<a href="#table-of-contents" class="anchor"></a>Table of Contents</h3>
<p>A table of contents can be added by using the <code>table_of_contents</code> argument. Setting this argument to TRUE, provides a table of contents that shows the variable alias (<code><a href="http://crunch.io/r/crunch/reference/describe-entity.html">crunch::alias</a></code>) followed by a short description of the variable that is derived from the crunch name (<code><a href="http://crunch.io/r/crunch/reference/describe-entity.html">crunch::name</a></code>) as well as the page number where the related codebook summary can be found.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/writeCodeBookLatex.html">writeCodeBookLatex</a></span><span class="op">(</span><span class="va">ds</span>, table_of_contents <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/codebook-toc-example-002.png" alt=""><p class="caption">Table of contents</p>
</div>
</div>
<div id="appendices" class="section level3">
<h3 class="hasAnchor">
<a href="#appendices" class="anchor"></a>Appendices</h3>
<p>By default, an appendix will be created for any categorical question that has more than 20 categories. This is done with the intent to avoid useless scrolling by the user. However, should you not care for an appendix you can use the argument <code>appendix = FALSE</code>. If you choose to not use an appendix, it may also be desirable to set <code>suppress_zero_counts=TRUE</code> to avoid long presentations of empty categories in dataset order.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/writeCodeBookLatex.html">writeCodeBookLatex</a></span><span class="op">(</span><span class="va">ds</span>, appendix <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
</div>
<div id="titles-sub-headings-and-other-descriptives" class="section level3">
<h3 class="hasAnchor">
<a href="#titles-sub-headings-and-other-descriptives" class="anchor"></a>Titles, Sub-headings and other Descriptives</h3>
<p>Currently you can change the title, subtitle and provide descriptives for the elements: sample description and field window.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/writeCodeBookLatex.html">writeCodeBookLatex</a></span><span class="op">(</span>
  <span class="va">ds</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, 
  title <span class="op">=</span> <span class="st">"Your Title Here"</span>, 
  subtitle <span class="op">=</span> <span class="st">"Your Subtitle Here"</span>, 
  field_period <span class="op">=</span> <span class="st">"Feb 2021 - Mar 2021"</span>,
  sample_desc <span class="op">=</span> <span class="st">"US Voting Adults"</span>,
  preamble <span class="op">=</span> <span class="st">"You can enter arbitrary \\textbf{\\emph{tex}} in the preamble, but it must be double escaped. "</span>
<span class="op">)</span></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/codebook-options-example-003.png" alt=""><p class="caption">Table of contents</p>
</div>
</div>
<div id="logos" class="section level3">
<h3 class="hasAnchor">
<a href="#logos" class="anchor"></a>Logos</h3>
<p>Default logos for YouGov and YouGov Blue have been included in the package for easy reference. If neither suit your purposes you can also specify a path to a PNG formatted image. The recommendation is an image size of 50 pixels in height and 250-350 pixels in width. If you would like your sub-brand logo added to the package please submit an issue on github (<a href="https://github.com/Crunch-io/crunchtabs/issues" class="uri">https://github.com/Crunch-io/crunchtabs/issues</a>)</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/writeCodeBookLatex.html">writeCodeBookLatex</a></span><span class="op">(</span><span class="va">ds</span>, logo <span class="op">=</span> <span class="st">"yougov"</span><span class="op">)</span>
<span class="co"># writeCodeBookLatex(ds, logo = "ygblue")</span></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/codebook-logos-example-004.png" alt=""><p class="caption">Table of contents</p>
</div>
</div>
<div id="suppressing-zeroes" class="section level3">
<h3 class="hasAnchor">
<a href="#suppressing-zeroes" class="anchor"></a>Suppressing Zeroes</h3>
<p>Although not recommended, there are some questions that have a significant amount of zero-filled categories (country of residence for example). This can lead to the end-user of the codebook scrolling through pages and pages of zero filled categories. You can suppress zeroes using the following:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/writeCodeBookLatex.html">writeCodeBookLatex</a></span><span class="op">(</span><span class="va">ds</span>, suppress_zero_counts <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="table-alignment" class="section level3">
<h3 class="hasAnchor">
<a href="#table-alignment" class="anchor"></a>Table Alignment</h3>
<p>The table alignment on the page can be adjusted to one of: “l” for left (the default), “c” for center, or “r” for right by using the <code>position</code> parameter.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/writeCodeBookLatex.html">writeCodeBookLatex</a></span><span class="op">(</span><span class="va">ds</span>, position <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/codebook-centered-example-005.png" alt=""><p class="caption">Centered codebook</p>
</div>
</div>
</div>
<div id="generating-codebooks-from-generic-data" class="section level2">
<h2 class="hasAnchor">
<a href="#generating-codebooks-from-generic-data" class="anchor"></a>Generating Codebooks from Generic Data</h2>
<p>You can also create a codebook from a generic dataset but you are required to create the meta data yourself. Below, we will discuss the format of the meta data and what you need to do to put it together.</p>
<p>Your meta data should include the following:</p>
<ul>
<li>alias: The short code for the name of the column</li>
<li>descrption: A long description of the contents of the variables. If this is survey data, your question text would go here.</li>
<li>name: This is a short name for the variable that is designed to provide flavor for the alias but no detail as in the description.</li>
<li>notes: This is descriptive text that identifies a subset.</li>
<li>recode: Required column but optional fill. Used in other processes where raw data requires additional manipulation or recoding.</li>
</ul>
<blockquote>
<p>Important: We parse the meta data file to create the codebook, we don’t parse the data other than for summarization, columns/variables not specified in the meta data are ignored.</p>
</blockquote>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Crunch-io/crunchtabs">crunchtabs</a></span><span class="op">)</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu">datasets</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/datasets/iris.html">iris</a></span>
<span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  alias <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
    <span class="st">"Sepal.Length"</span>, 
    <span class="st">"Sepal.Width"</span>,
    <span class="st">"Petal.Length"</span>,
    <span class="st">"Petal.Width"</span>,
    <span class="st">"Species"</span>
    <span class="op">)</span>,
  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
    <span class="st">"Sepal Length"</span>,
    <span class="st">"Sepal Width"</span>,
    <span class="st">"Petal Length"</span>,
    <span class="st">"Petal Width"</span>,
    <span class="st">"Iris Species"</span>
  <span class="op">)</span>,
  description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
    <span class="st">"The length of the flower's sepal"</span>,
    <span class="st">"The width of the flower's sepal"</span>,
    <span class="st">"The length of the flower's petals"</span>,
    <span class="st">"The width of the flower's petals"</span>,
    <span class="st">"The iris species"</span>
  <span class="op">)</span>,
  notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">""</span>, <span class="fl">5</span><span class="op">)</span>,
  recode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">5</span><span class="op">)</span>,
  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu"><a href="../reference/writeCodeBookLatexGeneric.html">writeCodeBookLatexGeneric</a></span><span class="op">(</span>
  <span class="va">ds</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span><span class="op">]</span>, 
  meta <span class="op">=</span> <span class="va">meta</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span>,<span class="op">]</span>,
  title <span class="op">=</span> <span class="st">"Edgar Anderson's Iris Data"</span>, 
  subtitle <span class="op">=</span> <span class="st">"The data were collected by Anderson, Edgar"</span>, 
  field_period <span class="op">=</span> <span class="st">"1935"</span>,
  sample_desc <span class="op">=</span> <span class="st">"The irises of the Gaspe Peninsula"</span>,
  preamble <span class="op">=</span> <span class="st">"This famous (Fisher's or Anderson's) iris data set gives the measurements in centimeters of the variables sepal length and width and petal length and width, respectively, for 50 flowers from each of 3 species of iris. The species are Iris setosa, versicolor, and virginica."</span>,
  table_of_contents <span class="op">=</span> <span class="cn">TRUE</span>,
<span class="op">)</span></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/codebook-generic-example-001.png" alt=""><p class="caption">Codebook generic example 001</p>
</div>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/codebook-generic-example-002.png" alt=""><p class="caption">Codebook generic example 001</p>
</div>
</div>
<div id="known-limitations" class="section level2">
<h2 class="hasAnchor">
<a href="#known-limitations" class="anchor"></a>Known Limitations</h2>
<ul>
<li>This software only supports latin characters. English, French, Spanish, and Portuguese will work out of the box. Other languages with significant special character or RTL are not supported.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Persephone Tsebelis, Kamil Sedrowicz, Neal Richardson, Brandon Bertelsen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>

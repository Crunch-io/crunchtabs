<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recontact and Tracking Reports • crunchtabs</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Recontact and Tracking Reports">
<meta property="og:description" content="crunchtabs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">crunchtabs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Codebooks.html">Generating Codebooks</a>
    </li>
    <li>
      <a href="../articles/FAQ.html">Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/Overview.html">Introduction and Overview</a>
    </li>
    <li>
      <a href="../articles/Theming.html">Theming</a>
    </li>
    <li>
      <a href="../articles/Tracking.html">Recontact and Tracking Reports</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Crunch-io/crunchtabs/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Tracking_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Recontact and Tracking Reports</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Crunch-io/crunchtabs/blob/master/vignettes/Tracking.Rmd"><code>vignettes/Tracking.Rmd</code></a></small>
      <div class="hidden name"><code>Tracking.Rmd</code></div>

    </div>

    
    
<p>Author: Brandon Bertelsen<br> Last updated: 2023-01-18</p>
<div id="reporting-over-time" class="section level2">
<h2 class="hasAnchor">
<a href="#reporting-over-time" class="anchor"></a>Reporting Over Time</h2>
<p><code>crunchtabs</code> supports two distinct forms of tracking reports. A tracking report where the same questions have been asked in the different datasets over time, and a recontact report where questions have been asked in the same survey requiring individual weighting. An example of this would be a political survey, where voters have been asked about their vote intention before and after a debate. The function to create tracking reports is much more flexible and is the recommended approach for creating reports of this nature where stacking datasets is of interest. It is not only limited to stacking data over time, it can also be used to stack datasets in different geographies from, for example, a global study, or any kind of split dataset.</p>
<p>Not all “recontact surveys” are formatted appropriately for use with the <code>recontact_report</code> function. It is often easier to get the desired result with <code>trackingReport</code>, by following these steps:</p>
<ol style="list-style-type: decimal">
<li>Split your dataset by wave.</li>
<li>Recalculate weights, ensuring the same variable name is used in all datasets.</li>
<li>Align variable names so that they are the same in both datasets where they exist.</li>
</ol>
<p>Missingness is dealt with gracefully. If there are missing data where a question was asked in one wave but not the other, the proportions are replaced with “-”.</p>
<div id="flipping-grids" class="section level3">
<h3 class="hasAnchor">
<a href="#flipping-grids" class="anchor"></a>Flipping Grids</h3>
<p>Often the case may be that your category labels are long, and your wave descriptors are very short. In this case, crunchtabs provides options for “flipping grids”. You can transpose the presentation so that the wave labels are columns, and the category labels are rows.</p>
<p>To do so globally, we set the <code>latex_flip_grids</code> theme option to <code>TRUE</code>:</p>
<p><em>NOTE: If your dataset contains categorical_arrays that are present in only one wave, it is better to use <code>latex_flip_specific_grids</code>. An example is provided further below.</em></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/themeNew.html">themeNew</a></span><span class="op">(</span><span class="va">...</span>, latex_flip_grids <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/example-013-recontact-flipped-grid.png" alt=""><p class="caption">Recontact Example with flipped grid</p>
</div>
<p>In addition to global transposition of grids, you can also do so conditionally using the <code>latex_flip_specific_grids</code> theme option:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/themeNew.html">themeNew</a></span><span class="op">(</span><span class="va">...</span>, latex_flip_specific_grids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"q1"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The above will only flip <code>q1</code>. When you have many variables and only a few that you do not want to be flipped, it can be useful to use <code><a href="https://rdrr.io/r/base/sets.html">setdiff()</a></code> to opt out specific variables. This is especially desirable if your data include categorical arrays that were only asked in one wave, as these are often much wider than</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cat1_all"</span>, <span class="st">"cat2_wave1"</span>, <span class="st">"catarray1_all"</span>, <span class="st">"catarray1_wave1"</span><span class="op">)</span>

<span class="va">theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/themeNew.html">themeNew</a></span><span class="op">(</span>
  <span class="va">...</span>, 
  latext_flip_specific_grids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="va">vars</span>, <span class="st">"catarray1_wave1"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="tracking-reports" class="section level3">
<h3 class="hasAnchor">
<a href="#tracking-reports" class="anchor"></a>Tracking Reports</h3>
<p>While recontact reports are designed for questions asked in the same dataset, there is also the ability to present questions asked in multiple datasets in a similar fashion. Even if you have a single dataset it can often be useful to split, align the variable names and recalculate the weights to take advantage of <code>trackingReport</code>’s flexibility.</p>
<p>In the code block below, we illustrate data setup and an example call to <code>trackingReports</code>. While our example is not representative of a real-life situation, the manner in which you would need to manage data are the same.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create example datasets as waves 1,2 and 3.</span>
<span class="va">ds1</span> <span class="op">&lt;-</span> <span class="fu">newExampleDataset</span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/name.html">name</a></span><span class="op">(</span><span class="va">ds1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Example dataset W1"</span>

<span class="va">ds2</span> <span class="op">&lt;-</span> <span class="fu">newExampleDataset</span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/name.html">name</a></span><span class="op">(</span><span class="va">ds2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Example dataset W2"</span>

<span class="va">ds3</span> <span class="op">&lt;-</span> <span class="fu">newExampleDataset</span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/name.html">name</a></span><span class="op">(</span><span class="va">ds3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Example dataset W3"</span>

<span class="co"># Create weights</span>
<span class="va">ds1</span><span class="op">$</span><span class="va">weight1</span> <span class="op">&lt;-</span> <span class="fu">makeWeight</span><span class="op">(</span><span class="va">ds1</span><span class="op">$</span><span class="va">q1</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.3</span>,<span class="fl">0.3</span>,<span class="fl">0.4</span>,<span class="fl">0</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">'weight1'</span><span class="op">)</span>
<span class="va">ds2</span><span class="op">$</span><span class="va">weight1</span> <span class="op">&lt;-</span> <span class="fu">makeWeight</span><span class="op">(</span><span class="va">ds2</span><span class="op">$</span><span class="va">q1</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.4</span>,<span class="fl">0.4</span>,<span class="fl">0.1</span>,<span class="fl">0.1</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">'weight1'</span><span class="op">)</span>
<span class="va">ds3</span><span class="op">$</span><span class="va">weight1</span> <span class="op">&lt;-</span> <span class="fu">makeWeight</span><span class="op">(</span><span class="va">ds3</span><span class="op">$</span><span class="va">q1</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.2</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">'weight1'</span><span class="op">)</span>

<span class="co"># Ensure each dataset has a weight</span>
<span class="fu">weight</span><span class="op">(</span><span class="va">ds1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ds1</span><span class="op">$</span><span class="va">weight1</span>
<span class="fu">weight</span><span class="op">(</span><span class="va">ds2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ds2</span><span class="op">$</span><span class="va">weight1</span>
<span class="fu">weight</span><span class="op">(</span><span class="va">ds3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ds3</span><span class="op">$</span><span class="va">weight1</span>

<span class="co"># Create a theme</span>
<span class="va">theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/themeNew.html">themeNew</a></span><span class="op">(</span>
  default_theme <span class="op">=</span> <span class="fu"><a href="../reference/themeDefaultLatex.html">themeDefaultLatex</a></span><span class="op">(</span><span class="op">)</span>, 
  latex_flip_grids <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># Prepare the data object</span>
<span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trackingReport.html">trackingReport</a></span><span class="op">(</span>
  dataset_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">ds1</span>, <span class="va">ds2</span>, <span class="va">ds3</span><span class="op">)</span>, 
  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"allpets"</span>, <span class="st">"q1"</span>, <span class="st">"petloc"</span><span class="op">)</span>,
  wave_labels <span class="op">=</span> <span class="cn">NULL</span> <span class="co"># automatically Wave 1, 2, 3</span>
<span class="op">)</span>

<span class="co"># Write to latex and convert to pdf</span>
<span class="fu"><a href="../reference/writeLatex.html">writeLatex</a></span><span class="op">(</span><span class="va">ct</span>, pdf <span class="op">=</span> <span class="cn">TRUE</span>, theme <span class="op">=</span> <span class="va">theme</span><span class="op">)</span></code></pre></div>
<p>There are a number of important elements here:</p>
<ol style="list-style-type: decimal">
<li><p>The order of <code>dataset_list</code> will be the same as their presentation in the resulting PDF. There are no checks to verify their order. Order your dataset from oldest to youngest. Or, if your data are bound by some other element that is not time (like the same survey ran in different localities) consider listing the datasets in alphabetical order.</p></li>
<li><p>The default <code>wave_labels</code> will be presented as Wave 1 through Wave N, where N is the length of the <code>dataset_list</code></p></li>
<li><p>It is strongly recommended that you weight each dataset with the same variable. The <code>weight</code> parameter accepts a character string that should reference a weighting variable in your datasets by its alias. Should you not specify a weight, the system will use the current weighting of each dataset (You can check what this is with <code>weight(ds)</code>). This can be useful if you have differently named weights across the datasets. But caution should be taken here as there is no way for the system to verify that your desired weight has been applied. As you saw in the example, it is recommended to assign your weight deliberately.</p></li>
<li><p>Many defaults are extracted from the first dataset in the <code>dataset_list</code>.</p></li>
</ol>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/ex016.png" alt=""><p class="caption">Example tracking report</p>
</div>
</div>
<div id="tracking-reports-for-other-stacking-data" class="section level3">
<h3 class="hasAnchor">
<a href="#tracking-reports-for-other-stacking-data" class="anchor"></a>Tracking Reports for Other Stacking Data</h3>
<p>Tracking reports accept any list of datasets. This means they can be used for a variety of situations where one needs to present a number of datasets in a stacked manner. Although called “tracking reports” they support any situation where the same questions are found in a list of datasets.</p>
<p>In the example below, a political survey question is shown that was asked in different cities across the United States of America regarding no-knock warrants.</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/ex017.png" alt=""><p class="caption">Generic stacking data</p>
</div>
<p>Although you will not be able to recreate this code locally, below is a recommended approach for aggregating similarly named datasets:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Crunch-io/crunchtabs">crunchtabs</a></span><span class="op">)</span>
<span class="fu">login</span><span class="op">(</span><span class="op">)</span>

<span class="co"># Dataset names tend to have minor variation, in this case it was the place:</span>
<span class="va">places</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"St Louis"</span>, <span class="st">"Memphis"</span>, <span class="st">"Detroit"</span>, <span class="st">"Charlotte"</span>, <span class="st">"Baltimore"</span>, <span class="st">"Birmingham"</span><span class="op">)</span><span class="op">)</span>
<span class="va">ds_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"Campaign Zero %s October 2020"</span>, <span class="va">places</span><span class="op">)</span>
<span class="va">ds_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">ds_names</span>, <span class="va">loadDataset</span><span class="op">)</span>

<span class="co"># Specify the variable(s). They must exist in all datasets</span>
<span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"noknock_supop"</span><span class="op">)</span>

<span class="co"># Create the results object</span>
<span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trackingReport.html">trackingReport</a></span><span class="op">(</span>
  <span class="va">ds_list</span>, wave_label <span class="op">=</span> <span class="va">places</span>, 
  vars <span class="op">=</span> <span class="va">vars</span><span class="op">)</span>

<span class="co"># Write to latex</span>
<span class="fu"><a href="../reference/writeLatex.html">writeLatex</a></span><span class="op">(</span><span class="va">ct</span>, pdf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="relabeling-categories-or-responses" class="section level3">
<h3 class="hasAnchor">
<a href="#relabeling-categories-or-responses" class="anchor"></a>Relabeling Categories or Responses</h3>
<p>There are a number of situations where your category names in a multiple response or categorical array question may be too long for reasonable presentation. Flipping grids is a good option, however, this may not be desirable or possible due to the number of waves or datasets that you are working with. For these cases, crunchtabs offers the ability to relabel your responses or to reposition them.</p>
<div id="relabeling" class="section level4">
<h4 class="hasAnchor">
<a href="#relabeling" class="anchor"></a>Relabeling</h4>
<p>Renaming happens just before printing to latex, that means you can create customizations for other defaults using this command. It’s important to recognize that this will overwrite both labels and subvariable names. If you define it appropriately, it will rename it. This includes wave names, category labels or multiple response statements.</p>
<p>You can generally relabel any element of the specified alias. The question options (categories), items (statements in an array), the notes (typically the subtext of a question), or the description (question text).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># `ct` is an object created by crosstabs or trackingReport</span>

<span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/relabel.html">relabel</a></span><span class="op">(</span>
    <span class="va">ct</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      alias <span class="op">=</span> <span class="st">"petloc"</span>,
      options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Amazing Cat"</span>, <span class="st">"Smelly Dog"</span>, <span class="st">"Annoying Bird"</span><span class="op">)</span>,
      notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"This is a new note"</span><span class="op">)</span>,
      description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"This is a new description"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span></code></pre></div>
</div>
</div>
<div id="generating-a-recontact-report" class="section level3">
<h3 class="hasAnchor">
<a href="#generating-a-recontact-report" class="anchor"></a>Generating a Recontact Report</h3>
<p>A recontact report is a special case and has limited flexibility.</p>
<ol style="list-style-type: decimal">
<li>Variables must have a suffix identifying the pre and post waves.</li>
<li>Two separate weighting variables</li>
</ol>
<p>In the code below, the crunch example dataset is used to illustrate the setup required for recontact style reporting. There are a few important assumptions about the naming and setup of your data that are critical to the success of this function:</p>
<ol style="list-style-type: decimal">
<li>Your “pre” and “post” wave’s questions should both have the same categories.</li>
<li>Your “pre” and “post” wave’s question names should be equal, with different suffixes, such as: question_pre and question_post.</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Crunch-io/crunchtabs">crunchtabs</a></span><span class="op">)</span>
<span class="fu">login</span><span class="op">(</span><span class="op">)</span>

<span class="co"># Create an example dataset</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu">newExampleDataset</span><span class="op">(</span><span class="op">)</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu">loadDataset</span><span class="op">(</span><span class="st">"Example dataset"</span><span class="op">)</span>

<span class="co"># Generate weights</span>
<span class="va">ds</span><span class="op">$</span><span class="va">weight1</span> <span class="op">&lt;-</span> <span class="fu">makeWeight</span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">q1</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.3</span>,<span class="fl">0.3</span>,<span class="fl">0.4</span>,<span class="fl">0</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">'weight1'</span><span class="op">)</span>
<span class="va">ds</span><span class="op">$</span><span class="va">weight2</span> <span class="op">&lt;-</span> <span class="fu">makeWeight</span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">q1</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.4</span>,<span class="fl">0.4</span>,<span class="fl">0.1</span>,<span class="fl">0.1</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">'weight2'</span><span class="op">)</span>

<span class="co"># Oddity of crunch, you can't use a weight in a tabBook that</span>
<span class="co"># has never been applied to the dataset. </span>
<span class="fu">weight</span><span class="op">(</span><span class="va">ds</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ds</span><span class="op">$</span><span class="va">weight1</span>
<span class="fu">weight</span><span class="op">(</span><span class="va">ds</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ds</span><span class="op">$</span><span class="va">weight2</span>
<span class="fu">weight</span><span class="op">(</span><span class="va">ds</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ds</span><span class="op">$</span><span class="va">weight1</span>

<span class="co"># Fake pre and post questions</span>
<span class="va">ds</span><span class="op">$</span><span class="va">q1_pre</span> <span class="op">&lt;-</span> <span class="fu">copyVariable</span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">q1</span>, deep <span class="op">=</span> <span class="cn">TRUE</span>, name <span class="op">=</span> <span class="st">"Pet name pre"</span><span class="op">)</span>
<span class="va">ds</span><span class="op">$</span><span class="va">q1_post</span> <span class="op">&lt;-</span> <span class="fu">copyVariable</span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">q1</span>, deep <span class="op">=</span> <span class="cn">TRUE</span>, name <span class="op">=</span> <span class="st">"Pet name post"</span><span class="op">)</span>
<span class="va">ds</span><span class="op">$</span><span class="va">country_pre</span> <span class="op">&lt;-</span> <span class="fu">copyVariable</span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">country</span>, deep <span class="op">=</span> <span class="cn">TRUE</span>, name <span class="op">=</span> <span class="st">"Country pre"</span><span class="op">)</span>
<span class="va">ds</span><span class="op">$</span><span class="va">country_post</span> <span class="op">&lt;-</span> <span class="fu">copyVariable</span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">country</span>, deep <span class="op">=</span> <span class="cn">TRUE</span>, name <span class="op">=</span> <span class="st">"Country post"</span><span class="op">)</span>

<span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recontact_toplines.html">recontact_toplines</a></span><span class="op">(</span>
  <span class="va">ds</span>,
  questions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"q1"</span>, <span class="st">"country"</span><span class="op">)</span>,
  suffixes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"_pre"</span>, <span class="st">"_post"</span><span class="op">)</span>,
  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Pre"</span>, <span class="st">"Post"</span><span class="op">)</span>,
  weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"weight1"</span>, <span class="st">"weight2"</span><span class="op">)</span>
<span class="op">)</span>


<span class="va">theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/themeNew.html">themeNew</a></span><span class="op">(</span>default_theme <span class="op">=</span> <span class="fu"><a href="../reference/themeDefaultLatex.html">themeDefaultLatex</a></span><span class="op">(</span><span class="op">)</span>, one_per_sheet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="../reference/writeLatex.html">writeLatex</a></span><span class="op">(</span><span class="va">ct</span>, pdf <span class="op">=</span> <span class="cn">TRUE</span>, open <span class="op">=</span> <span class="cn">TRUE</span>, theme <span class="op">=</span> <span class="va">theme</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/Crunch-io/crunchtabs/main/vignettes/example-014-recontact_topline.png" alt=""><p class="caption">Recontact Example</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Persephone Tsebelis, Kamil Sedrowicz, Neal Richardson, Brandon Bertelsen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
